<!-- Squelette du frontend (index.html) -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Gestion de Vélos</title>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs" defer></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-6" x-data="bikeApp()">
  <h1 class="text-3xl mb-6 font-bold">Gestion de Vélos</h1>

  <form @submit.prevent="addBike" class="mb-6">
    <input type="text" x-model="newBike.Brand" placeholder="Marque" class="border p-2 mr-2">
    <input type="text" x-model="newBike.Model" placeholder="Modèle" class="border p-2 mr-2">
    <input type="text" x-model="newBike.Status" placeholder="Statut" class="border p-2 mr-2">
    <button class="bg-green-500 text-white px-4 py-2" onclick="addBike(bike.Brand, bike.Model, bike.Status)">Ajouter</button>
  </form>

  <h2 class="text-xl mb-2">Liste des Vélos</h2>
  <ul>
    <template x-for="bike in bikes" :key="bike.ID">
      <li class="mb-2">
        <strong x-text="bike.Brand"></strong> - <span x-text="bike.Model"></span> - <em x-text="bike.Status"></em>
        <button @click="deleteBike(bike.ID)" class="ml-4 text-red-600">Supprimer</button>
      </li>
    </template>
  </ul>

  <script>
    function bikeApp() {
      return {
        bikes: [],
        newBike: { Brand: '', Model: '', Status: '' },

        fetchBikes() {
          fetch('/bikes')
            .then(res => res.json())
            .then(data => this.bikes = data);
        },

        addBike() {
          fetch('bikes', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(this.newBike)
          }).then(() => {
            this.newBike = { Brand: '', Model: '', Status: '' };
            this.fetchBikes();
          });
        },

        deleteBike(id) {
          fetch(`/api/bikes/${id}`, { method: 'DELETE' })
            .then(() => this.fetchBikes());
        },

        init() {
          this.fetchBikes();
        }
      }
    }
  </script>
</body>
</html>
